"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[234],{86862:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var n=a(27378),r=a(20951),l=a(48171);function i(e){const t=Object.assign({h1:"h1",a:"a",div:"div",p:"p",h2:"h2",ul:"ul",li:"li",code:"code",img:"img",h3:"h3",blockquote:"blockquote",h4:"h4",strong:"strong",ol:"ol",pre:"pre"},(0,r.ah)(),e.components);return n.createElement(n.Fragment,null,n.createElement(t.h1,{id:"customer-address-jpa-service",style:{position:"relative"}},n.createElement(t.a,{href:"#customer-address-jpa-service","aria-label":"customer address jpa service permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Customer Address JPA Service"),"\n",n.createElement(t.p,null,"Canonical ZenWave example of a DDD Aggregate with JPA persistence and Externalized Domain Events."),"\n",n.createElement(t.p,null,"This is a canonical example of a ZenWave designed and generated project, around a DDD Aggregate persisted with JPA and externalized Domain Events published to a Kafka topic. You can find the ",n.createElement(t.a,{href:"https://github.com/ZenWave360/zenwave-playground/tree/main/examples/customer-address-jpa"},"Complete Source Code")," at GitHub."),"\n",n.createElement(t.h2,{id:"what-youll-learn",style:{position:"relative"}},n.createElement(t.a,{href:"#what-youll-learn","aria-label":"what youll learn permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"What You'll Learn"),"\n",n.createElement(t.ul,null,"\n",n.createElement(t.li,null,"How to model a DDD aggregate using ZDL"),"\n",n.createElement(t.li,null,"Generate REST APIs from domain models"),"\n",n.createElement(t.li,null,"Implement event-driven architecture with AsyncAPI"),"\n",n.createElement(t.li,null,"Create a complete Spring Boot microservice"),"\n"),"\n",n.createElement(t.p,null,"We assume you have already read the ",n.createElement(t.a,{href:"https://www.zenwave360.io/docs/getting-started/"},"Getting Started")," section and installed ZenWave SDK CLI and IntelliJ Plugin and are somewhat familiar with the concepts of DDD and Event-Driven Architecture."),"\n",n.createElement(t.h2,{id:"what-we-will-be-building-a-customer-master-data-service",style:{position:"relative"}},n.createElement(t.a,{href:"#what-we-will-be-building-a-customer-master-data-service","aria-label":"what we will be building a customer master data service permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"What we will be building: A Customer Master Data Service"),"\n",n.createElement(t.p,null,"We will be building a Java/SpringBoot microservice exposing CRUD operations for a ",n.createElement(t.code,null,"Customer")," aggregate as a REST API and publishing Domain Events to Kafka."),"\n",n.createElement(t.p,null,"The ",n.createElement(t.code,null,"Customer")," entity is the root of the aggregate, holding relationships to other entities:"),"\n",n.createElement(t.ul,null,"\n",n.createElement(t.li,null,"an array of ",n.createElement(t.code,null,"Address")," entities stored in a JSON column in the database and"),"\n",n.createElement(t.li,null,"a ",n.createElement(t.code,null,"@OneToMany")," collection of ",n.createElement(t.code,null,"PaymentMethod")," entities."),"\n"),"\n",n.createElement(t.p,null,"NOTE: In this example, the ",n.createElement(t.code,null,"Customer")," aggregate represents a cluster of related entities that are persisted and managed as a single unit. However, the business logic resides in the ",n.createElement(t.code,null,"CustomerService")," class rather than within the entities themselves."),"\n",n.createElement(t.p,null,'This pattern is sometimes called an "Anemic Domain Model." For this particular example, the domain complexity is relatively simple and doesn\'t justify implementing a Rich Domain Model with business logic embedded in the aggregate entities.'),"\n",n.createElement(t.img,{src:"https://www.plantuml.com/plantuml/png/PP11QuGm48NlWVo7EUuMBBJdHPJT7bfmBQlqKdgODOChc4II2KLA_tjnjQwojynxoRmlB_6CZeDkfQXQz1xsmRFLv62t0wnhHpKoGHp3ZnIpHuORxgM88YaATesfmQ2cUI2DJIj5gfGZxp-_0CSJ-V5DaXigROQcXmvxJOOpuejLNefVAQG0W1l8GnGf-sqYcDQDzaWxIJ3G5MmTAMWC8BmL-H4gsmPj1e4l10ePp-ZfSONjsH7nF5RNRzqps7-6zoNkacHbN7bMIjbt1DntjuugTEeOz9dSrCbGHsbpGr1DiGkIzVg99eQxZF4scQ3llG7guxL8DqzRARAqA5zE-_Hqs3nlfw24Z0gw_GC0"}),"\n",n.createElement(t.h3,{id:"rest-api-defined-with-openapi",style:{position:"relative"}},n.createElement(t.a,{href:"#rest-api-defined-with-openapi","aria-label":"rest api defined with openapi permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"REST API defined with OpenAPI"),"\n",n.createElement(t.p,null,"With these REST Endpoints:"),"\n",n.createElement(t.p,null,n.createElement(t.a,{href:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/resources/public/apis/openapi.yml"},"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/resources/public/apis/openapi.yml")),"\n",n.createElement(t.p,null,n.createElement(t.img,{src:"https://github.com/ZenWave360/zenwave-playground/raw/main/examples/customer-address-jpa/src/main/resources/public/apis/endpoints-screenshot.png",alt:"OpenAPI Endpoints"})),"\n",n.createElement(t.h3,{id:"externalized-domain-events-with-asyncapi",style:{position:"relative"}},n.createElement(t.a,{href:"#externalized-domain-events-with-asyncapi","aria-label":"externalized domain events with asyncapi permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Externalized Domain Events with AsyncAPI"),"\n",n.createElement(t.p,null,"And these Domain Events published to a Kafka Topic:"),"\n",n.createElement(t.p,null,n.createElement(t.a,{href:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/resources/public/apis/asyncapi.yml"},"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/resources/public/apis/asyncapi.yml")),"\n",n.createElement(t.p,null,n.createElement(t.img,{src:"https://github.com/ZenWave360/zenwave-playground/raw/main/examples/customer-address-jpa/src/main/resources/public/apis/asyncapi-operations.png",alt:"AsyncAPI Operations"})),"\n",n.createElement(t.h2,{id:"building-with-zenwave-domain-model-and-sdk",style:{position:"relative"}},n.createElement(t.a,{href:"#building-with-zenwave-domain-model-and-sdk","aria-label":"building with zenwave domain model and sdk permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Building with ZenWave Domain Model and SDK"),"\n",n.createElement(t.p,null,"When modeling a microservice with ZenWave SDK we usually do it using two main files:"),"\n",n.createElement(t.ul,null,"\n",n.createElement(t.li,null,"A ",n.createElement(t.code,null,"zenwave-model.zdl")," file containing the domain model and service definitions, we use this file to iterate and refine the domain model."),"\n",n.createElement(t.li,null,"A ",n.createElement(t.code,null,"zenwave-scripts.zw")," file containing the plugin configurations and executions, you can run each plugin individually from ",n.createElement(t.a,{href:"/plugin/"},"ZenWave Model Editor for IntelliJ")," to generate different aspects of the application."),"\n"),"\n",n.createElement(t.p,null,"The full application we are building in this example was defined in the following ZDL model:"),"\n",n.createElement(l.rv,{title:"`zenwave-model.zdl` for Customer Master Data Service",language:"zdl",collapsed:!0,url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/zenwave-model.zdl"}),"\n",n.createElement(l.rv,{title:"`zenwave-scripts.zw` for Customer Master Data Service",language:"zdl",collapsed:!0,url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/zenwave-scripts.zw"}),"\n",n.createElement(t.blockquote,null,"\n",n.createElement(t.p,null,"NOTE: You can name this files as you wish, just mind the file extension ",n.createElement(t.code,null,".zdl")," for the domain model and ",n.createElement(t.code,null,".zw")," for the scripts and in ",n.createElement(t.code,null,".zw")," pointing to the proper ",n.createElement(t.code,null,"zdlFile")," file containing the domain model."),"\n"),"\n",n.createElement(t.p,null,"So let's dive into the details of how this application was built using ZenWave SDK."),"\n",n.createElement(t.h3,{id:"model-configuration",style:{position:"relative"}},n.createElement(t.a,{href:"#model-configuration","aria-label":"model configuration permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Model Configuration"),"\n",n.createElement(t.p,null,"Let's start with the configuration section of the ZDL model:"),"\n",n.createElement(l.rv,{title:"ZenWave Model Configuration for Customer Master Data Service",language:"zdl",collapsed:!1,visibleRange:"1,18",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/zenwave-model.zdl"}),"\n",n.createElement(t.p,null,"Basic settings:"),"\n",n.createElement(t.ul,null,"\n",n.createElement(t.li,null,n.createElement(t.code,null,"title")," and ",n.createElement(t.code,null,"basePackage")," are self-explanatory and used throughout ZenWave SDK plugins for code and documentation generation."),"\n",n.createElement(t.li,null,n.createElement(t.code,null,"persistence")," tells the ",n.createElement(t.code,null,"BackendApplicationDefaultPlugin")," which data store to target (",n.createElement(t.code,null,"jpa")," or ",n.createElement(t.code,null,"mongodb"),"), generating the appropriate Spring Data interfaces and controlling entity ID data types."),"\n",n.createElement(t.li,null,n.createElement(t.code,null,"databaseType")," works with ",n.createElement(t.code,null,"jpa")," persistence to generate proper Hibernate configuration for ID generation strategies."),"\n",n.createElement(t.li,null,n.createElement(t.code,null,"layout")," determines the architectural structure generated by ",n.createElement(t.code,null,"BackendApplicationDefaultPlugin"),". The ",n.createElement(t.code,null,"CleanHexagonalProjectLayout")," creates a clean/hexagonal architecture with distinct layers: core domain, web adapters, and infrastructure. Note that JPA repository implementations are auto-generated by Spring Data, so no manual repository code is needed."),"\n"),"\n",n.createElement(t.p,null,"Additional configurations customizing the project layout:"),"\n",n.createElement(t.ul,null,"\n",n.createElement(t.li,null,n.createElement(t.code,null,"openApiApiPackage"),", ",n.createElement(t.code,null,"openApiModelPackage"),", and ",n.createElement(t.code,null,"openApiModelNameSuffix")," are used by the ",n.createElement(t.code,null,"OpenAPIControllersPlugin")," and should match the values configured in the ",n.createElement(t.code,null,"openapi-generator-maven-plugin")," in the ",n.createElement(t.code,null,"pom.xml")," file."),"\n"),"\n",n.createElement(l.rv,{title:"OpenAPI Generator Maven Plugin Configuration in pom.xml",language:"xml",collapsed:!0,visibleRange:"326,362",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/pom.xml"}),"\n",n.createElement(t.h3,{id:"domain-modeling",style:{position:"relative"}},n.createElement(t.a,{href:"#domain-modeling","aria-label":"domain modeling permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Domain Modeling"),"\n",n.createElement(t.p,null,"Domain modeling starts with the ",n.createElement(t.code,null,"entity")," declarations. Entities body contains fields, nested entities. ",n.createElement(t.code,null,"id")," and ",n.createElement(t.code,null,"version")," fields are added automatically to entities. Entities decorated with ",n.createElement(t.code,null,"@auditing")," will also have ",n.createElement(t.code,null,"createdDate"),", ",n.createElement(t.code,null,"createdBy"),", ",n.createElement(t.code,null,"lastModifiedDate"),", and ",n.createElement(t.code,null,"lastModifiedBy")," fields added automatically."),"\n",n.createElement(t.p,null,"Entities decorated with ",n.createElement(t.code,null,"@aggregate")," are considered the root of an aggregate and a Spring Data repository is generated for them and can be used on ",n.createElement(t.code,null,"services"),"."),"\n",n.createElement(t.p,null,"Nested entities are equivalente to entities decorated with ",n.createElement(t.code,null,"@embedded")," which are not persisted separately, they are part of the aggregate root entity:"),"\n",n.createElement(t.ul,null,"\n",n.createElement(t.li,null,"In ",n.createElement(t.code,null,"mongodb")," they are stored as nested documents, and they don't have an id or version fields."),"\n",n.createElement(t.li,null,"In ",n.createElement(t.code,null,"jpa")," they are stored either as ",n.createElement(t.code,null,"@Embeddable")," or as a JSON column in the database. In this particular example, we are using a JSON column to store the ",n.createElement(t.code,null,"addresses")," array in the ",n.createElement(t.code,null,"Customer")," entity. (Arrays are not supported as ",n.createElement(t.code,null,"@Embeddable")," in JPA)"),"\n"),"\n",n.createElement(t.p,null,"Relationships are modeled following JHipster JDL syntax and the corresponding fields are added to entities. In DDD, relationships between aggregates should typically be mapped only by their id. ZenWave SDK allows you to use ",n.createElement(t.code,null,"@OneToXXX")," relationships between aggregates, which are mapped by their id and include a read-only reference to the related entity, enabling a richer domain model in the ZDL while maintaining DDD principles. This pattern is not used in this example, but it's good to know this capability exists."),"\n",n.createElement(l.rv,{title:"ZenWave Domain Model for Customer Master Data Service",language:"zdl",collapsed:!1,visibleRange:"20,46",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/zenwave-model.zdl"}),"\n",n.createElement(l.rv,{title:"Customer Entity Generated by ZenWave SDK",language:"java",collapsed:!0,visibleRange:"23,115",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/java/io/zenwave360/example/core/domain/Customer.java"}),"\n",n.createElement(l.rv,{title:"Address Nested Entity Generated by ZenWave SDK",language:"java",collapsed:!0,url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/java/io/zenwave360/example/core/domain/Address.java"}),"\n",n.createElement(l.rv,{title:"PaymentMethod Nested Entity Generated by ZenWave SDK",language:"java",collapsed:!0,url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/java/io/zenwave360/example/core/domain/PaymentMethod.java"}),"\n",n.createElement(t.p,null,"Enums are also generated as Java enums, with an autogenerated JPA ",n.createElement(t.code,null,"AttributeConverter")," which persists the enum the integer configured as ",n.createElement(t.code,null,"enumValue")," in the ZDL model."),"\n",n.createElement(l.rv,{title:"PaymentMethodType Enum Generated by ZenWave SDK",language:"java",collapsed:!0,url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/java/io/zenwave360/example/core/domain/PaymentMethodType.java"}),"\n",n.createElement(t.p,null,"Aggregates will also get generated a Spring Data Repository interface and an InMemory implementation for testing purposes."),"\n",n.createElement(l.rv,{title:"CustomerRepository.java Generated by ZenWave SDK",language:"java",collapsed:!0,url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/java/io/zenwave360/example/core/outbound/jpa/CustomerRepository.java"}),"\n",n.createElement(l.rv,{title:"InMemoryCustomerRepository.java Generated by ZenWave SDK",language:"java",collapsed:!0,visibleRange:"1,33",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/test/java/io/zenwave360/example/infrastructure/jpa/inmemory/CustomerRepositoryInMemory.java"}),"\n",n.createElement(t.h3,{id:"services",style:{position:"relative"}},n.createElement(t.a,{href:"#services","aria-label":"services permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Services"),"\n",n.createElement(t.p,null,"Services are the entry point to the core domain, and are generated as Spring ",n.createElement(t.code,null,"@Service")," classes."),"\n",n.createElement(l.rv,{title:"Customer Service for (Customer)",language:"zdl",collapsed:!1,visibleRange:"55,68",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/zenwave-model.zdl"}),"\n",n.createElement(t.p,null,"This will generate a ",n.createElement(t.code,null,"CustomerService"),", a ",n.createElement(t.code,null,"CustomerServiceImpl")," referencing ",n.createElement(t.code,null,"CustomerRepository")," (because it's this service",n.createElement(t.code,null,"@aggregate")," entity) and ",n.createElement(t.code,null,"CustomerServiceTest")," that uses an in-memory implementation of the repository for testing."),"\n",n.createElement(l.rv,{title:"CustomerService.java Generated by ZenWave SDK",language:"java",collapsed:!0,url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/java/io/zenwave360/example/core/inbound/CustomerService.java"}),"\n",n.createElement(l.rv,{title:"CustomerServiceImpl.java Generated by ZenWave SDK",language:"java",collapsed:!0,url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/java/io/zenwave360/example/core/implementation/CustomerServiceImpl.java"}),"\n",n.createElement(l.rv,{title:"CustomerServiceTest.java Generated by ZenWave SDK",language:"java",collapsed:!0,url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/test/java/io/zenwave360/example/core/implementation/CustomerServiceTest.java"}),"\n",n.createElement(t.p,null,"This ",n.createElement(t.code,null,"CustomerServiceTest")," is just an skeleton, you will need to provide testing data and assertions."),"\n",n.createElement(t.h3,{id:"unit-and-integration-tests",style:{position:"relative"}},n.createElement(t.a,{href:"#unit-and-integration-tests","aria-label":"unit and integration tests permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Unit and Integration Tests"),"\n",n.createElement(t.p,null,"ZenWave SDK generates a complete suit of both Unit and Integration Tests:"),"\n",n.createElement(t.h4,{id:"core-integration-tests",style:{position:"relative"}},n.createElement(t.a,{href:"#core-integration-tests","aria-label":"core integration tests permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Core Integration Tests"),"\n",n.createElement(t.p,null,n.createElement(t.code,null,"BackendApplicationDefaultPlugin")," generates Integration Tests for ",n.createElement(t.code,null,"infrastructure")," or ",n.createElement(t.code,null,"outbound adapter classes")," (repositories in this case) that run as ",n.createElement(t.code,null,"@SpringBootTest")," against TestContainers using ",n.createElement(t.a,{href:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/docker-compose.yml"},"docker-compose.yml")," configuration."),"\n",n.createElement(t.p,null,"These tests verify that JPA configuration and entity relationships are correctly mapped. As the developer, you need to populate tests with input data and assertions, and provide initial database state in the standard ",n.createElement(t.code,null,"src/test/resources/data.sql")," file. These integration tests are transactional, so the database state is rolled back to its original state after each test."),"\n",n.createElement(l.rv,{title:"Testing JPA and relationshipst in CustomerRepositoryIntegrationTest.java",language:"java",collapsed:!0,visibleRange:"40,70",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/test/java/io/zenwave360/example/infrastructure/jpa/CustomerRepositoryIntegrationTest.java"}),"\n",n.createElement(t.p,null,"Remember to verify that Services list in ",n.createElement(t.code,null,"DockerComposeInitializer.java")," match the services declared in ",n.createElement(t.code,null,"docker-compose.yml"),", pay particular attention to the database service name, which is ",n.createElement(t.code,null,"app")," in this case."),"\n",n.createElement(l.rv,{title:"Services List in DockerComposeInitializer.java",language:"java",collapsed:!1,visibleRange:"43,49",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/test/java/io/zenwave360/example/config/DockerComposeInitializer.java"}),"\n",n.createElement(t.p,null,n.createElement(t.code,null,"DockerComposeInitializer.java")," contains the annotation required to start TestContainers in your ",n.createElement(t.code,null,"@SpringBootTest")," tests:"),"\n",n.createElement(l.rv,{title:"BaseRepositoryIntegrationTest.java",language:"java",collapsed:!0,url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/test/java/io/zenwave360/example/infrastructure/jpa/BaseRepositoryIntegrationTest.java"}),"\n",n.createElement(t.h4,{id:"core-unit-tests",style:{position:"relative"}},n.createElement(t.a,{href:"#core-unit-tests","aria-label":"core unit tests permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Core Unit Tests"),"\n",n.createElement(t.p,null,n.createElement(t.code,null,"BackendApplicationDefaultPlugin")," also generates Unit Tests for your core services that use InMemory Repository implementations (avoiding Mockito). It also generates a ",n.createElement(t.code,null,"ServicesInMemoryConfig.java")," to provide service implementations wired with InMemory dependencies:"),"\n",n.createElement(l.rv,{title:"Using ServicesInMemoryConfig.java in Service Tests",language:"java",collapsed:!0,visibleRange:"19,33",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/test/java/io/zenwave360/example/core/implementation/CustomerServiceTest.java"}),"\n",n.createElement(t.p,null,"You can provide in-memory test data by creating JSON files in ",n.createElement(t.code,null,"src/test/resources/{{persistence}}/data/{{aggregateName}}/{{id}}.json")," - these will populate the in-memory repository before each test runs."),"\n",n.createElement(l.rv,{title:"src/test/resources/data/jpa/customer/1.json",language:"json",collapsed:!0,url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/test/resources/data/jpa/customer/1.json"}),"\n",n.createElement(t.h3,{id:"exposing-a-rest-api-for-your-service",style:{position:"relative"}},n.createElement(t.a,{href:"#exposing-a-rest-api-for-your-service","aria-label":"exposing a rest api for your service permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Exposing a REST API for your Service"),"\n",n.createElement(t.p,null,"Services can be decorated with ",n.createElement(t.code,null,"@rest"),", ",n.createElement(t.code,null,"@get"),", ",n.createElement(t.code,null,"@post"),", ",n.createElement(t.code,null,"@put"),", ",n.createElement(t.code,null,"@delete"),", ",n.createElement(t.code,null,"@patch")," annotations to document how they will be exposed as REST endpoints. The ",n.createElement(t.code,null,"ZdlToOpenAPIPlugin")," can generate a complete OpenAPI definition from these annotations, which you can then customize manually or by applying OpenAPI overlays during code generation."),"\n",n.createElement(t.p,null,"The ",n.createElement(t.code,null,"ZdlToOpenAPIPlugin")," will generate ",n.createElement(t.code,null,"#/components/schemas/**")," for all entities, inputs and outputs used in your service commands. Additional annotations like ",n.createElement(t.code,null,"@fileupload")," and ",n.createElement(t.code,null,"@filedownload")," are available for file handling endpoints (see the ",n.createElement(t.a,{href:"/docs/examples/ddd-examples/modulith-clinical-tool-jpa/"},"Clinical Tool - Modulith")," example for details)."),"\n",n.createElement(t.h4,{id:"create-customer-endpoint",style:{position:"relative"}},n.createElement(t.a,{href:"#create-customer-endpoint","aria-label":"create customer endpoint permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Create Customer Endpoint"),"\n",n.createElement(l.TJ,{text1:"When using the `ZDLToOpenAPIPlugin`, the following",sourceTitle:"this service command:",sourceLanguage:"zdl",sourceVisibleRange:"57,58",sourceCollapsed:!1,sourceUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/zenwave-model.zdl",text2:"would produce this:",outputTitle:"src/main/resources/public/apis/openapi.yml",outputLanguage:"yaml",outputVisibleRange:"27,44",outputUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/resources/public/apis/openapi.yml"}),"\n",n.createElement(l.TJ,{text1:"When using the `OpenAPIControllersPlugin`, the following",sourceTitle:"src/main/resources/public/apis/openapi.yml",sourceLanguage:"yaml",sourceVisibleRange:"27,44",sourceUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/resources/public/apis/openapi.yml",text2:"would produce this java code:",outputTitle:"CustomerApiController.java",outputLanguage:"java",outputVisibleRange:"69,77",outputUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/java/io/zenwave360/example/adapters/web/CustomerApiController.java"}),"\n",n.createElement(t.p,null,"And its corresponding:"),"\n",n.createElement(l.rv,{title:"CustomerDTOsMapper.java Generated by ZenWave SDK",language:"java",collapsed:!0,visibleRange:"14,36",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/java/io/zenwave360/example/adapters/web/mappers/CustomerDTOsMapper.java"}),"\n",n.createElement(l.rv,{title:"CustomerApiControllerTest.java Generated by ZenWave SDK",language:"java",collapsed:!0,visibleRange:"28,37",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/test/java/io/zenwave360/example/adapters/web/CustomerApiControllerTest.java"}),"\n",n.createElement(t.blockquote,null,"\n",n.createElement(t.p,null,"Remember that generated ",n.createElement(t.code,null,"Mappers")," and ",n.createElement(t.code,null,"Tests")," are provided as a starting point, you will need to adapt them to your needs."),"\n"),"\n",n.createElement(t.h4,{id:"search-customer-endpoint",style:{position:"relative"}},n.createElement(t.a,{href:"#search-customer-endpoint","aria-label":"search customer endpoint permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Search Customer Endpoint"),"\n",n.createElement(l.TJ,{text1:"When using the `ZDLToOpenAPIPlugin`, the following",sourceTitle:"sevice command `@paginated` and returning an aray:",sourceLanguage:"zdl",sourceVisibleRange:"65,67",sourceCollapsed:!1,sourceUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/zenwave-model.zdl",text2:"would produce this:",outputTitle:"src/main/resources/public/apis/openapi.yml",outputLanguage:"yaml",outputVisibleRange:"102,123",outputUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/resources/public/apis/openapi.yml"}),"\n",n.createElement(l.TJ,{text1:"When using the `OpenAPIControllersPlugin`, the previous OpenAPI definition:",sourceTitle:"src/main/resources/public/apis/openapi.yml",sourceLanguage:"yaml",sourceVisibleRange:"102,123",sourceUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/resources/public/apis/openapi.yml",text2:"would produce this java code:",outputTitle:"CustomerApiController.java",outputLanguage:"java",outputVisibleRange:"105,119",outputUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/java/io/zenwave360/example/adapters/web/CustomerApiController.java"}),"\n",n.createElement(t.p,null,"And its corresponding:"),"\n",n.createElement(l.rv,{title:"CustomerApiControllerTest.java Generated by ZenWave SDK",language:"java",collapsed:!0,visibleRange:"65,73",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/test/java/io/zenwave360/example/adapters/web/CustomerApiControllerTest.java"}),"\n",n.createElement(t.h4,{id:"web-adapters-unit-tests",style:{position:"relative"}},n.createElement(t.a,{href:"#web-adapters-unit-tests","aria-label":"web adapters unit tests permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Web Adapters Unit Tests"),"\n",n.createElement(t.p,null,n.createElement(t.code,null,"OpenAPIControllersPlugin")," generates Spring MVC controllers that implement your OpenAPI specification, along with corresponding Unit Tests that use ",n.createElement(t.code,null,"ServicesInMemoryConfig.java")," for dependency injection."),"\n",n.createElement(l.rv,{title:"Unit Testing Spring MVC Controllers",language:"java",collapsed:!0,visibleRange:"14,37",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/test/java/io/zenwave360/example/adapters/web/CustomerApiControllerTest.java"}),"\n",n.createElement(t.p,null,"You can disable controller Unit Test generation if you prefer to test your REST API through HTTP calls instead of testing the Java controllers directly."),"\n",n.createElement(t.h3,{id:"web-adapters-integration-tests-with-spring-webtestclient",style:{position:"relative"}},n.createElement(t.a,{href:"#web-adapters-integration-tests-with-spring-webtestclient","aria-label":"web adapters integration tests with spring webtestclient permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Web Adapters Integration Tests with Spring WebTestClient"),"\n",n.createElement(t.p,null,"If you prefer to test your REST API via HTTP semantics you can use ",n.createElement(t.code,null,"SpringWebTestClientPlugin")," to generate both single endpoint tests as well as business flows spaning multiple endpoints:"),"\n",n.createElement(l.TJ,{text1:"When using the `SpringWebTestClientPlugin`, the following",sourceTitle:"zenwave-scripts.zw",sourceLanguage:"zdl",sourceVisibleRange:"31,33",sourceCollapsed:!0,sourceUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/zenwave-scripts.zw",text2:"would produce this API test:",outputTitle:"CustomerApiIntegrationTest",outputLanguage:"java",outputCollapsed:!0,outputUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/test/java/io/zenwave360/example/adapters/web/CustomerApiControllerTest.java"}),"\n",n.createElement(l.TJ,{text1:"When using the `SpringWebTestClientPlugin`, the following",sourceTitle:"zenwave-scripts.zw",sourceLanguage:"zdl",sourceVisibleRange:"35,44",sourceCollapsed:!0,sourceUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/zenwave-scripts.zw",text2:"would produce this Business Flow API test:",outputTitle:"CustomerApiIntegrationTest",outputLanguage:"java",outputCollapsed:!0,outputUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/test/java/io/zenwave360/example/adapters/web/CreateUpdateDeleteCustomerIntegrationTest.java"}),"\n",n.createElement(t.p,null,"You can control whether these are Unit or Integration Tests with ",n.createElement(t.code,null,"@SpringBootTest")," in"),"\n",n.createElement(l.rv,{title:"BaseWebTestClientTest.java",language:"java",collapsed:!0,visibleRange:"14,27",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/test/java/io/zenwave360/example/adapters/web/BaseWebTestClientTest.java"}),"\n",n.createElement(t.p,null,"As always, it's your responsibility as the developer to provide test data and parameters that match the initial state, whether you're using a containerized database or an in-memory implementation."),"\n",n.createElement(t.h3,{id:"publishing-domain-events-with-asyncapi",style:{position:"relative"}},n.createElement(t.a,{href:"#publishing-domain-events-with-asyncapi","aria-label":"publishing domain events with asyncapi permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Publishing Domain Events with AsyncAPI"),"\n",n.createElement(t.p,null,"You service commands can publish Domain Events as part of their operative using ",n.createElement(t.code,null,"withEvent")," keyword:"),"\n",n.createElement(l.TJ,{text1:"When using `withEvents` in service commands",sourceTitle:"zenwave-model.zdl",sourceLanguage:"zdl",sourceVisibleRange:"62,62",sourceCollapsed:!1,sourceUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/zenwave-model.zdl",text2:"would produce generate and use an EventsProvider in your service implementation:",outputTitle:"CustomerServiceImpl.java",outputLanguage:"java",outputVisibleRange:"56,69",outputCollapsed:!1,outputUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/java/io/zenwave360/example/core/implementation/CustomerServiceImpl.java"}),"\n",n.createElement(t.p,null,"You can control whether you want to keep you Domain Events internal to your application or publish them to an external broker and documented using AsyncAPI:"),"\n",n.createElement(l.rv,{title:"Domain Events decorated with @asyncapi in ZDL",language:"zdl",collapsed:!1,visibleRange:"70,82",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/zenwave-model.zdl"}),"\n",n.createElement(l.TJ,{text1:"Events decorated with `@asyncapi` when running `ZDLToAsyncAPIPlugin`",sourceTitle:"zenwave-scripts.zw",sourceLanguage:"zdl",sourceVisibleRange:"12,19",sourceCollapsed:!1,sourceUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/zenwave-scripts.zw",text2:"would generate a complete asyncapi.yml file (in this case, based in plugin configuration, including avro schemas `avro/*.avsc`)",outputTitle:"src/main/resources/public/apis/asyncapi.yml",outputLanguage:"yaml",outputCollapsed:!0,outputUrl:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/src/main/resources/public/apis/asyncapi.yml"}),"\n",n.createElement(t.p,null,"Then you can configure ZenWave SDK Maven Plugin to generate all required DTOs and the ",n.createElement(t.code,null,"EventProducer")," we see before referenced in you ",n.createElement(t.code,null,"CustomerService.java")),"\n",n.createElement(l.rv,{title:"ZenWave SDK Maven Plugin configured to genreate Spring Cloud Stream code from asyncapi.yml",language:"xml",collapsed:!0,visibleRange:"376,437",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/pom.xml"}),"\n",n.createElement(t.p,null,"Because we are using avro as payload format, we also need to configure avro-maven-plugin to generate java classes from our avro schemas:"),"\n",n.createElement(l.rv,{title:"avro-maven-plugin configured to generate java classes from avro schemas",language:"xml",collapsed:!0,visibleRange:"439,460",url:"https://github.com/ZenWave360/zenwave-playground/blob/main/examples/customer-address-jpa/pom.xml"}),"\n",n.createElement(t.p,null,"Please refer to ",n.createElement(t.a,{href:"https://www.zenwave360.io/zenwave-sdk/plugins/asyncapi-spring-cloud-streams3/"},"https://www.zenwave360.io/zenwave-sdk/plugins/asyncapi-spring-cloud-streams3/")," for more details about how to configure ZenWave SDK Maven Plugin."),"\n",n.createElement(t.h2,{id:"running-the-customer-service",style:{position:"relative"}},n.createElement(t.a,{href:"#running-the-customer-service","aria-label":"running the customer service permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Running the Customer Service"),"\n",n.createElement(t.h3,{id:"prerequisites",style:{position:"relative"}},n.createElement(t.a,{href:"#prerequisites","aria-label":"prerequisites permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Prerequisites"),"\n",n.createElement(t.ul,null,"\n",n.createElement(t.li,null,n.createElement(t.strong,null,"JDK 21+")),"\n",n.createElement(t.li,null,n.createElement(t.strong,null,"Maven 3.8+")),"\n",n.createElement(t.li,null,n.createElement(t.strong,null,"Docker & Docker Compose")," - If you don't have Docker Compose installed, we recommend ",n.createElement(t.a,{href:"https://rancherdesktop.io/"},"Rancher Desktop")," configured with ",n.createElement(t.code,null,"dockerd")," engine (not ",n.createElement(t.code,null,"containerd"),"), which includes both ",n.createElement(t.code,null,"docker")," and ",n.createElement(t.code,null,"docker-compose")," commands."),"\n",n.createElement(t.li,null,n.createElement(t.strong,null,"Your favorite IDE")),"\n"),"\n",n.createElement(t.h3,{id:"quick-start",style:{position:"relative"}},n.createElement(t.a,{href:"#quick-start","aria-label":"quick start permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Quick Start"),"\n",n.createElement(t.p,null,"Follow these steps to run the complete application:"),"\n",n.createElement(t.ol,null,"\n",n.createElement(t.li,null,"\n",n.createElement(t.p,null,n.createElement(t.strong,null,"Start infrastructure services:")),"\n",n.createElement(t.pre,null,n.createElement(t.code,{className:"language-bash"},"docker-compose up -d\n")),"\n"),"\n",n.createElement(t.li,null,"\n",n.createElement(t.p,null,n.createElement(t.strong,null,"Run the Spring Boot application:")),"\n",n.createElement(t.pre,null,n.createElement(t.code,{className:"language-bash"},"mvn spring-boot:run\n")),"\n"),"\n",n.createElement(t.li,null,"\n",n.createElement(t.p,null,n.createElement(t.strong,null,"Access the API:")),"\n",n.createElement(t.ul,null,"\n",n.createElement(t.li,null,"Open ",n.createElement(t.a,{href:"http://localhost:8080/swagger-ui/index.html"},"Swagger UI")," in your browser"),"\n",n.createElement(t.li,null,"Use ",n.createElement(t.strong,null,"Basic Authentication"),": username ",n.createElement(t.code,null,"admin"),", password ",n.createElement(t.code,null,"password")),"\n"),"\n"),"\n",n.createElement(t.li,null,"\n",n.createElement(t.p,null,n.createElement(t.strong,null,"Test the endpoints:")),"\n",n.createElement(t.ul,null,"\n",n.createElement(t.li,null,"Try creating a customer via the POST ",n.createElement(t.code,null,"/customers")," endpoint"),"\n",n.createElement(t.li,null,"Retrieve customers using GET ",n.createElement(t.code,null,"/customers/search")),"\n"),"\n"),"\n"),"\n",n.createElement(t.h3,{id:"whats-running",style:{position:"relative"}},n.createElement(t.a,{href:"#whats-running","aria-label":"whats running permalink",className:"anchor before"},n.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"What's Running"),"\n",n.createElement(t.ul,null,"\n",n.createElement(t.li,null,n.createElement(t.strong,null,"PostgreSQL")," (port 5432) - Customer data persistence"),"\n",n.createElement(t.li,null,n.createElement(t.strong,null,"Kafka")," (port 9092) - Domain events messaging"),"\n",n.createElement(t.li,null,n.createElement(t.strong,null,"Spring Boot App")," (port 8080) - REST API and business logic"),"\n"),"\n",n.createElement(t.p,null,"Happy Coding! 🚀"))}var o=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,r.ah)(),e.components);return t?n.createElement(t,e,n.createElement(i,e)):i(e)};function s(e){let{children:t}=e;return t}function c(e){return n.createElement(s,e,n.createElement(o,e))}},48171:function(e,t,a){a.d(t,{d2:function(){return n.d},zx:function(){return c},TJ:function(){return u.T},L0:function(){return h},$s:function(){return f},VS:function(){return E},gT:function(){return w},P7:function(){return v},Gz:function(){return g},S:function(){return J},VM:function(){return x},sd:function(){return I},kW:function(){return T},$D:function(){return j},DH:function(){return C},vC:function(){return z},LR:function(){return y},Ee:function(){return D},Gh:function(){return G},Bk:function(){return A},Nm:function(){return M},rv:function(){return U.r},X_:function(){return m.X},YZ:function(){return _},vk:function(){return O},BW:function(){return R},Mo:function(){return V}});var n=a(63585),r=a(27378),l=a(87573),i=a(30294);const o=e=>{let{background:t,backgroundHover:a,on:n}=e;return()=>(0,i.ivY)(["background-color:",";color:",";&:hover:not(:disabled){background-color:",";color:",";}&:active:not(:disabled){background-color:",";color:",";}"],t,n,a,n,a,n)},s=i.ZPm.buttonBox.withConfig({displayName:"Button__InnerButton",componentId:"sc-1qxez5q-0"})(["appearance:none;border-radius:base;transition:base;font-weight:500;border:0;display:inline-flex;align-items:center;cursor:pointer;font-size:16;padding:2 3;text-decoration:none !important;&:disabled{opacity:0.5;cursor:default;}&[data-variant='primary']{","}&[data-variant='success']{","}&[data-variant='danger']{","}&[data-variant='neutral']{","}"],o({background:"primary-600",backgroundHover:"primary-700",on:"white"}),o({background:"green-600",backgroundHover:"green-700",on:"white"}),o({background:"red-600",backgroundHover:"red-700",on:"white"}),o({background:"gray-300",backgroundHover:"gray-400",on:"black"})),c=r.forwardRef(((e,t)=>{let{variant:a="primary",children:n,...i}=e;return r.createElement(l.z,{ref:t,"data-variant":a},(e=>r.createElement(s,Object.assign({},e,i),n)))}));a(23824);var u=a(37898),d=(a(31729),a(63681)),m=a(84234);const p=i.ZPm.box.withConfig({displayName:"Feature__InnerFeature",componentId:"sc-17n9iec-0"})(["border-left:1;border-left-style:dashed;border-left-color:layout-border;padding-left:4 !important;padding-right:5 !important;"]),h=r.forwardRef(((e,t)=>r.createElement(p,Object.assign({ref:t,col:{xs:1,md:1/3},px:2,pt:4,pb:{xs:2,md:5}},e)))),g=i.ZPm.h2.withConfig({displayName:"Feature__FeatureTitle",componentId:"sc-17n9iec-1"})(["margin:3 0;font-size:16;font-weight:500;border-left:1;border-color:primary-400;margin-left:",";padding-left:",";"],d.th.px(-9),d.th.px(9)),v=i.ZPm.p.withConfig({displayName:"Feature__FeatureText",componentId:"sc-17n9iec-2"})(["color:on-background-light;font-size:15;text-align:justify;margin:4 0;"]),b=i.ZPm.img.withConfig({displayName:"Feature__InnerFeatureImage",componentId:"sc-17n9iec-3"})(["margin-top:3;"]),f=r.forwardRef(((e,t)=>r.createElement(b,Object.assign({ref:t,width:48,height:48},e)))),E=r.forwardRef(((e,t)=>r.createElement(m.X,Object.assign({ref:t,row:!0,my:-4,px:3},e)))),w=r.forwardRef(((e,t)=>r.createElement(i.x.section,Object.assign({ref:t,py:4,borderTop:1,borderBottom:1,borderColor:"layout-border"},e)))),y=i.ZPm.h1Box.withConfig({displayName:"Hero__HeroTitle",componentId:"sc-18tbum5-0"})(["font-size:38;font-weight:600;line-height:1.2;letter-spacing:-1.12px;margin:0 0 2;"," ",""],(0,d.up)("md",(0,i.ivY)(["padding-top:4;font-size:48;"])),(0,d.up)("xl",(0,i.ivY)(["font-size:60;"]))),z=i.ZPm.pBox.withConfig({displayName:"Hero__HeroTeaser",componentId:"sc-18tbum5-1"})(["font-size:18;margin:3 0;"," ",""],(0,d.up)("md",(0,i.ivY)(["font-size:20;"])),(0,d.up)("xl",(0,i.ivY)(["font-size:24;"]))),S=(0,i.ZPm)(m.X).withConfig({displayName:"Hero__InnerHero",componentId:"sc-18tbum5-2"})(["background-repeat:no-repeat;background-position:top -5% center;background-size:100% auto;padding-top:65%;text-align:center;"," ",""],(0,d.up)("md",(0,i.ivY)(["padding-top:0;margin-top:5;background-position:center right;background-size:58% auto;min-height:400;text-align:left;"])),(0,d.up)("xl",(0,i.ivY)(["margin-top:6;"]))),x=r.forwardRef(((e,t)=>{let{backgroundImageURL:a,...n}=e;return r.createElement(S,Object.assign({ref:t,backgroundImage:"url("+a+")"},n))})),j=r.forwardRef(((e,t)=>r.createElement(i.x.div,Object.assign({ref:t,w:{md:.5}},e)))),C=i.ZPm.sectionBox.withConfig({displayName:"Hero__HeroSection",componentId:"sc-18tbum5-3"})(["overflow:hidden;padding-top:2;padding-bottom:5;"]),T=r.forwardRef(((e,t)=>r.createElement(i.x.div,Object.assign({ref:t,row:!0,m:-2,justifyContent:{xs:"center",md:"initial"}},e)))),I=r.forwardRef(((e,t)=>r.createElement(i.x.div,Object.assign({ref:t,col:"auto",p:2},e))));var H=a(24956);const k=i.ZPm.div.withConfig({displayName:"Image__ImageContainer",componentId:"sc-1b0134e-0"})(["text-align:",";"],(e=>e.align)),W=i.ZPm.img.withConfig({displayName:"Image__InnerImage",componentId:"sc-1b0134e-1"})(["display:inline-block;"]),Z=(e,t)=>"dark"===t?e.dark||e.src:e.light||e.src,D=r.forwardRef(((e,t)=>r.createElement(k,{align:e.align||"center",className:e.visible},r.createElement(W,Object.assign({ref:t,src:Z(e,(0,H.If)()[0])},e)))));a(15239),a(83160);const P=(0,i.ZPm)(i.x.cite).withConfig({displayName:"Quote__Cite",componentId:"sc-12i53kz-0"})(["display:block;text-align:right;margin-top:1rem;"]),A=r.forwardRef(((e,t)=>r.createElement(i.x.blockquote,Object.assign({ref:t,className:"quote"},e)))),M=r.forwardRef(((e,t)=>r.createElement(P,Object.assign({ref:t},e)))),R=r.forwardRef(((e,t)=>r.createElement(i.x.section,Object.assign({ref:t,py:4,borderTop:1,borderBottom:1,borderColor:"layout-border"},e)))),_=i.ZPm.divBox.withConfig({displayName:"WideFeature",componentId:"sc-1ak5yjf-0"})(["display:block;",")"],(0,d.up)("md",(0,i.ivY)(["margin:0 20px;border-top:1px dashed;border-bottom:1px dotted;border-color:var(--xstyled-colors-layout-border,#d4d4d8);display:grid;grid-template-columns:1fr 1fr 1fr;"]))),V=i.ZPm.divBox.withConfig({displayName:"WideFeature__WideFeatureText",componentId:"sc-1ak5yjf-1"})(["padding:1rem;grid-column-start:span 2;font-size:18;"," ",""],(0,d.up)("md",(0,i.ivY)(["font-size:20;padding:3rem;padding-top:2rem;"])),(0,d.up)("xl",(0,i.ivY)(["font-size:24;"]))),B=i.ZPm.divBox.withConfig({displayName:"WideFeature__WideFeatureImageContainer",componentId:"sc-1ak5yjf-2"})(["padding:1rem;text-align:center;"]),L=i.ZPm.imgBox.withConfig({displayName:"WideFeature__InnerImage",componentId:"sc-1ak5yjf-3"})(["display:inline-block;"]),N=(e,t)=>"dark"===t?e.dark||e.src:e.light||e.src,O=r.forwardRef(((e,t)=>r.createElement(B,{className:e.className},r.createElement(L,Object.assign({ref:t,src:N(e,(0,H.If)()[0])},e))))),J=e=>{let{gist:t,file:a}=e;const n=(0,r.useRef)(null);(0,r.useEffect)((()=>{(async()=>{const e=a?"https://gist.githubusercontent.com/"+t+"/raw/"+a:"https://gist.githubusercontent.com/"+t+"/raw";try{const t=await fetch(e);if(t.ok){const e=22*(await t.text()).split("\n").length+40;n.current&&(n.current.style.height=e+"px")}else console.error("Failed to fetch Gist content")}catch(r){console.error("Error fetching Gist content:",r)}})()}),[t,a]);const l=a?"https://gist.github.com/"+t+".pibb?file="+a:"https://gist.github.com/"+t+".pibb",i=a?"https://gist.github.com/"+t+"#file-"+a.replace(/\./g,"-").toLowerCase():"https://gist.github.com/"+t;return r.createElement("div",{style:{border:"1px solid #ccc",padding:"10px 0 0 0",borderRadius:"5px"}},a&&r.createElement("header",{style:{marginLeft:"10px",fontStyle:"oblique"}},r.createElement("span",{role:"img","aria-label":"source code"},"🗒️"),r.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},a)),r.createElement("iframe",{title:a,ref:n,src:l,width:"100%",frameBorder:"0",style:{margin:"0",padding:"0"}}))},G=r.forwardRef(((e,t)=>r.createElement(i.x.strong,Object.assign({ref:t,className:"orange"},e))));var U=a(29368)}}]);
//# sourceMappingURL=component---smooth-doc-src-templates-doc-js-content-file-path-c-users-ivangsa-workspace-zenwave-zen-wave-360-github-io-website-pages-docs-examples-examples-customer-address-jpa-mdx-f1c414bdc7cb55da248f.js.map